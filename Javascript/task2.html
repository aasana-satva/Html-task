<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Multi Step Registration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link href="style.css" rel="stylesheet" />
  </head>

  <body>
    <div class="container mt-5">
      <div class="card">
        <h2 class="text-center mb-4">REGISTRATION</h2>

        <form id="multiStepForm" class="needs-validation" novalidate>
          <!-- STEP 1 -->
          <div class="form-step active">
            <h4>PERSONAL DETAILS</h4>
            <div class="mb-3">
              <input
                id="firstName"
                class="form-control"
                placeholder="First Name"
                pattern="[A-Za-z ]+"
                onkeypress="return ((event.charCode>=65 && event.charCode<=90) || (event.charCode>=97 && event.charCode<=122) || event.charCode===32)"
                required
              />
              <div class="invalid-feedback">Enter your First Name</div>
            </div>
            <div class="mb-3">
              <input
                id="lastName"
                class="form-control"
                placeholder="Last Name"
                pattern="[A-Za-z ]+"
                onkeypress="return ((event.charCode>=65 && event.charCode<=90) || (event.charCode>=97 && event.charCode<=122) || event.charCode===32)"
                required
              />
              <div class="invalid-feedback">Enter your Last Name</div>
            </div>
            <div class="mb-3">
              <select id="gender" class="form-select" required>
                <option value="">Select Gender</option>
                <option>Male</option>
                <option>Female</option>
              </select>
              <div class="invalid-feedback">Select Gender</div>
            </div>
            <div class="mb-3">
              <input
                id="zipCode"
                class="form-control"
                placeholder="Zip Code"
                pattern="[0-9]{6}"
                maxlength="6"
                onkeypress="return event.charCode>=48 && event.charCode<=57"
                required
              />
              <div class="invalid-feedback">Enter 6-digit Zip Code</div>
            </div>
            <button
              type="button"
              class="btn btn-success float-end"
              onclick="nextStep()"
            >
              Next
            </button>
          </div>

          <!-- STEP 2 -->
          <div class="form-step">
            <h4>PROFILE INFORMATION</h4>
            <div class="mb-3">
              <input
                id="email"
                type="email"
                class="form-control"
                placeholder="Email"
                required
              />
              <div class="invalid-feedback">Enter valid Email</div>
            </div>
            <div class="mb-3">
              <input
                id="username"
                class="form-control"
                placeholder="Username"
                required
              />
              <div class="invalid-feedback">Enter Username</div>
            </div>
            <div class="mb-3">
              <input
                id="password"
                type="password"
                class="form-control"
                placeholder="Password"
                pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*#?&]).{8,}$"
                required
              />
              <div class="invalid-feedback">
                Password must contain uppercase, lowercase, number, special char
                & 8 chars
              </div>
            </div>
            <div class="mb-3">
              <input
                id="confirmPassword"
                type="password"
                class="form-control"
                placeholder="Confirm Password"
                required
              />
              <div class="invalid-feedback">Passwords do not match</div>
            </div>
            <button type="button" class="btn btn-warning" onclick="prevStep()">
              Previous
            </button>
            <button
              type="button"
              class="btn btn-success float-end"
              onclick="nextStep()"
            >
              Next
            </button>
          </div>

          <!-- STEP 3 -->
          <div class="form-step">
            <h4>BANK INFORMATION</h4>
            <div class="mb-3">
              <select id="bank" class="form-select" required>
                <option value="">Select Bank</option>
                <option>State Bank of India</option>
                <option>HDFC Bank</option>
                <option>ICICI Bank</option>
                <option>Axis Bank</option>
                <option>Punjab National Bank</option>
                <option>Canara Bank</option>
              </select>
              <div class="invalid-feedback">Please select Bank Name</div>
            </div>
            <div class="mb-3">
              <select id="branch" class="form-select" required>
                <option value="">Select Branch</option>
                <option>Main Branch</option>
                <option>City Branch</option>
                <option>Industrial Area</option>
                <option>Market Road</option>
                <option>Highway Branch</option>
              </select>
              <div class="invalid-feedback">Please select Branch Name</div>
            </div>
            <div class="mb-3">
              <select id="accountType" class="form-select" required>
                <option value="">Select Account Type</option>
                <option>Savings Account</option>
                <option>Current Account</option>
                <option>Salary Account</option>
                <option>Fixed Deposit</option>
                <option>Recurring Deposit</option>
              </select>
              <div class="invalid-feedback">Please select Account Type</div>
            </div>
            <div class="mb-3">
              <input
                id="accountNumber"
                class="form-control"
                placeholder="Account Number"
                pattern="^[0-9]{9,18}$"
                minlength="9"
                maxlength="18"
                onkeypress="return event.charCode>=48 && event.charCode<=57"
                required
              />
              <div class="invalid-feedback">
                Account number must be 9 to 18 digits
              </div>
            </div>
            <button type="button" class="btn btn-warning" onclick="prevStep()">
              Previous
            </button>
            <button
              type="button"
              class="btn btn-success float-end"
              onclick="nextStep()"
            >
              Next
            </button>
          </div>

          <!-- STEP 4 -->
          <div class="form-step">
            <h4>PAYMENT INFORMATION</h4>
            <div class="mb-3">
              <select id="paymentType" class="form-select" required>
                <option value="">Select Payment Type</option>
                <option>Master Card</option>
                <option>Visa</option>
              </select>
              <div class="invalid-feedback">Please select payment type</div>
            </div>
            <div class="mb-3">
              <input
                id="cardHolderName"
                class="form-control"
                placeholder="Card Holder Name"
                pattern="[A-Za-z ]+"
                onkeypress="return ((event.charCode>=65 && event.charCode<=90)||(event.charCode>=97 && event.charCode<=122)||event.charCode===32)"
                required
              />
              <div class="invalid-feedback">Enter valid card holder name</div>
            </div>
            <div class="mb-3">
              <input
                id="cardNumber"
                class="form-control"
                placeholder="Card Number"
                pattern="[0-9]{16}"
                maxlength="16"
                minlength="16"
                onkeypress="return event.charCode>=48 && event.charCode<=57"
                required
              />
              <div class="invalid-feedback">Card number must be 16 digits</div>
            </div>
            <div class="mb-3">
              <input
                id="cvv"
                class="form-control"
                placeholder="CVV"
                pattern="[0-9]{3}"
                maxlength="3"
                minlength="3"
                onkeypress="return event.charCode>=48 && event.charCode<=57"
                required
              />
              <div class="invalid-feedback">CVV must be 3 digits</div>
            </div>
            <div class="mb-3">
              <input
                id="expiryMonth"
                type="month"
                class="form-control"
                required
              />
              <div class="invalid-feedback">
                Please select valid expiry month
              </div>
            </div>
            <button type="button" class="btn btn-warning" onclick="prevStep()">
              Previous
            </button>
            <button
              type="button"
              class="btn btn-success float-end"
              onclick="showSummary()"
            >
              Next
            </button>
          </div>

          <!-- STEP 5: SUMMARY -->
          <div class="form-step">
            <h4 class="text-center">USER DETAILS</h4>
            <table class="table">
              <tr>
                <th>First Name</th>
                <td id="firstNameSummary"></td>
              </tr>
              <tr>
                <th>Last Name</th>
                <td id="lastNameSummary"></td>
              </tr>
              <tr>
                <th>Gender</th>
                <td id="genderSummary"></td>
              </tr>
              <tr>
                <th>Zip Code</th>
                <td id="zipCodeSummary"></td>
              </tr>
              <tr>
                <th>Email</th>
                <td id="emailSummary"></td>
              </tr>
              <tr>
                <th>Username</th>
                <td id="usernameSummary"></td>
              </tr>
              <tr>
                <th>Password</th>
                <td id="passwordSummary"></td>
              </tr>
              <tr>
                <th>Bank</th>
                <td id="bankSummary"></td>
              </tr>
              <tr>
                <th>Branch</th>
                <td id="branchSummary"></td>
              </tr>
              <tr>
                <th>Account Type</th>
                <td id="accountTypeSummary"></td>
              </tr>
              <tr>
                <th>Account Number</th>
                <td id="accountNumberSummary"></td>
              </tr>
              <tr>
                <th>Payment Type</th>
                <td id="paymentTypeSummary"></td>
              </tr>
              <tr>
                <th>Card Holder Name</th>
                <td id="cardHolderNameSummary"></td>
              </tr>
              <tr>
                <th>Card Number</th>
                <td id="cardNumberSummary"></td>
              </tr>
              <tr>
                <th>CVV</th>
                <td id="cvvSummary"></td>
              </tr>
              <tr>
                <th>Expiry Month</th>
                <td id="expiryMonthSummary"></td>
              </tr>
            </table>

            <button type="button" class="btn btn-warning" onclick="prevStep()">
              Previous
            </button>
            <button
              type="button"
              class="btn btn-success float-end"
              onclick="finalSubmit()"
            >
              Submit
            </button>
          </div>
        </form>

        <div class="text-center step-dots mt-4">
          <span class="active"></span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      let currentStep = 0;
      const steps = document.querySelectorAll(".form-step"); //class for form steps
      const dots = document.querySelectorAll(".step-dots span"); //class for dots
      const form = document.getElementById("multiStepForm"); //id for form

      // Show a specific step
      function showStep(index) {
        //show steps in array from 0
        steps.forEach((s) => s.classList.remove("active"));
        dots.forEach((d) => d.classList.remove("active"));
        steps[index].classList.add("active");
        dots[index].classList.add("active");
        currentStep = index;
      }

      // Go to next step with validation
      function nextStep() {
        const inputs = steps[currentStep].querySelectorAll("input, select");
        let isValid = true;

        inputs.forEach((input) => {
          if (!input.checkValidity()) isValid = false;
        });

        const password = document.getElementById("password");
        const confirmPassword = document.getElementById("confirmPassword");
        if (password && confirmPassword) {
          if (password.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity("Mismatch");
            isValid = false;
          } else {
            confirmPassword.setCustomValidity("");
          }
        }

        if (!isValid) {
          steps[currentStep].classList.add("was-validated");
          return;
        }

        showStep(currentStep + 1);
      }

      // Go to previous step
      function prevStep() {
        showStep(currentStep - 1);
      }

      // Show summary table
      function showSummary() {
        const inputs = steps[3].querySelectorAll("input, select");
        let isValid = true;

        inputs.forEach((input) => {
          if (!input.checkValidity()) isValid = false;
        });

        if (!isValid) {
          steps[3].classList.add("was-validated");
          return;
        }

        const fields = [
          "firstName",
          "lastName",
          "gender",
          "zipCode",
          "email",
          "username",
          "password",
          "bank",
          "branch",
          "accountType",
          "accountNumber",
          "paymentType",
          "cardHolderName",
          "cardNumber",
          "cvv",
          "expiryMonth",
        ];

        fields.forEach((id) => {
          const input = document.getElementById(id);
          const summary = document.getElementById(id + "Summary");
          if (input && summary) summary.textContent = input.value;
        });

        showStep(4);
      }

      // Final submit
      function finalSubmit() {
        alert("Data Saved!");
        form.reset();
        steps.forEach((s) => s.classList.remove("was-validated"));
        showStep(0);
      }
    </script>
  </body>
</html>
